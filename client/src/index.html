<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Airplane Site</title>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap");
    </style>
    <link rel="stylesheet" href="/css/main.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
  <body>
    <nav>
      <div class="logo">
        <img
          id="logo-picture"
          src="pictures/flightmatch.png"
          alt=""
          width="100px"
          height="100px"
        />
      </div>
      <ul id="menuList">
        <li><a href="">Home</a></li>
        <li><a href="/About-Us">About</a></li>
        <li>
          <a href="/log-in"><button>LogIn/Signup</button></a>
        </li>
      </ul>
      <div class="menu-icon">
        <i class="fa-solid fa-bars" onclick="toggleMenu()"></i>
      </div>
    </nav>

    <!-- <nav>
       <h1 class="bebas-neue-regular">Flight match</h1>
    <a class="bebas-neue-regular" href="/sign-up"><button>Go to Form</button> </a>
      </nav> -->

    <h1 class="bebas-neue-regular" id="where">Where to ?</h1>
    <p class="bebas-neue-regular" id="slogan">find where you need to be</p>

    <form id="search" action="">
      <div class="search">
        <span class="search-icon material-symbols-outlined">search</span>
        <input class="search-input" type="search" placeholder="Search" />
      </div>
    </form>

    <div class="places-to-go">
      <div class="picture-wrapper">
        <img class="pictures" src="pictures\chicago.jpg" alt="chicago" />
        <p class="bebas-neue-regular">Chicago</p>
      </div>

      <div class="picture-wrapper">
        <img class="pictures" src="pictures\la.jpg" alt="la" />
        <p class="bebas-neue-regular">Los Angles</p>
      </div>

      <div class="picture-wrapper">
        <img class="pictures" src="pictures\las-vegas.jpg" alt="las-vegas" />
        <p class="bebas-neue-regular">Las Vegas</p>
      </div>

      <div class="picture-wrapper">
        <img class="pictures" src="pictures\new-york.jpg" alt="new-york" />
        <p class="bebas-neue-regular">New York</p>
      </div>

      <div class="picture-wrapper">
        <img class="pictures" src="pictures\orlando.jpg" alt="orlando" />
        <p class="bebas-neue-regular">Orlando</p>
      </div>
    </div>


        
    <div id="flight-finder"></div>
    
    <h1 class="bebas-neue-regular" id="where">Safe Travels Starts with flight match!</h1>
    
    <p class="bebas-neue-regular" id="slogan" >easy breezy, relax and let us do the work.</p>
  </body>
  <script>
          document
        .getElementById("submit-locations")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const fromCity = document.getElementById("from-city").value;
          const fromState = document.getElementById("from-state").value;
          // const toCity = document.getElementById("to-city").value;
          const toState = document.getElementById("to-state").value;
          try {
            const response = await fetch(`/submitLocations/${fromCity}/${fromState}/${toState}`);
            const data = await response.json();
            console.log(data[0])
            for(i = 0; i<3; i++){
            let newDiv = document.createElement("div");
            let titleHOne = document.createElement("h2");
            let airlinePara = document.createElement("p");
            let cityPara = document.createElement("p");
            let idPara = document.createElement("p");
            let milesPara = document.createElement("p");
            let timePara = document.createElement("p");
            let costPara = document.createElement("p");
            let toCity = data[i].City
            try{
            const response = await fetch(`/getLocoInfo/${fromCity}/${fromState}/${toState}/${toCity}`);
            const locoData = await response.json();
            const titleNode = document.createTextNode(`${fromCity}, ${fromState} to ${toState}, ${toCity}`);
            const airlineNode = document.createTextNode("Airline: "+ data[i].Airline);
            const cityNode = document.createTextNode("City: "+ toCity);
            const idNode = document.createTextNode("Flight ID: "+ data[i].FlightID);
            let roundedMiles = Math.round((locoData * 100))/100
            let estimatedTime = Math.round(((roundedMiles/547)*100))/100
            let estimatedCost = Math.round(((roundedMiles*0.15)*100))/100
            const milesNode = document.createTextNode("Miles: "+ roundedMiles);
            const timeNode = document.createTextNode("Time: "+ estimatedTime + " hours");
            const costNode = document.createTextNode("Cost: $"+ estimatedCost);
            titleHOne.appendChild(titleNode)
            airlinePara.appendChild(airlineNode);
            cityPara.appendChild(cityNode);
            idPara.appendChild(idNode);
            milesPara.appendChild(milesNode);
            timePara.appendChild(timeNode)
            costPara.appendChild(costNode)
            newDiv.appendChild(titleHOne)
            newDiv.appendChild(airlinePara);
            newDiv.appendChild(cityPara);
            newDiv.appendChild(idPara);
            newDiv.appendChild(milesPara);
            newDiv.appendChild(timePara)
            newDiv.appendChild(costPara)
            newDiv.classList.add("flight-info-box");
            const currentDiv = document.getElementById("div1");
            document.body.insertBefore(newDiv, currentDiv);}
            catch{
              alert("Error Getting Flight Information 2: " + error.message);
            }
            }
          } catch (error) {
            alert("Error Getting Flight Information: " + error.message);
          }
        });
  </script>
</html>
